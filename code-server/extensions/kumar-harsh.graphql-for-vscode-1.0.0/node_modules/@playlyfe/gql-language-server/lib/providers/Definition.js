"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _vscodeLanguageserver = require("vscode-languageserver");

var _helpers = require("../utils/helpers");

class Definition {
  constructor({
    documents,
    gqlService
  }) {
    this.documents = void 0;
    this.gqlService = void 0;
    this.documents = documents;
    this.gqlService = gqlService;
  }

  provideDefinition(params) {
    const doc = this.documents.get(params.textDocument.uri);

    if (!doc) {
      return [];
    }

    const defLocation = this.gqlService.getDef({
      sourceText: doc.getText(),
      sourcePath: (0, _helpers.uriToFilePath)(params.textDocument.uri),
      position: (0, _helpers.lspPositionToGQLPosition)(params.position)
    });
    return defLocation.map(_helpers.gqlLocationToLSPLocation);
  }

}

exports.default = Definition;